<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Mapa 360 Itaipu - Debug Hotspots</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
    }
    #panorama {
      width: 100%;
      height: 100vh;
    }
    .pannellum-hotspot .pnlm-hotspot-inner {
      width: 100px !important;       /* largura da área clicável */
      height: 100px !important;      /* altura da área clicável */
      min-width: 100px !important;
      min-height: 100px !important;
      border-radius: 50%;            /* mantém o círculo */
      background-color: rgba(255,0,0,0.2); /* opcional, só para ver a área */
      cursor: pointer;
    }
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.css"/>
  <script src="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.js"></script>
</head>
<body>
  <div id="panorama"></div>

  <script>
    // Recupera a última cena visitada ou usa 'entrada' como padrão
    const ultimaCena = localStorage.getItem('ultimaCena') || 'entrada';

    const viewer = pannellum.viewer('panorama', {
      "default": {
        "firstScene": ultimaCena,
        "author": "Gustavo Neves",
        "sceneFadeDuration": 1000,
        "autoLoad": true,
        "hotSpotDebug": true   // 👈 muda para false quando finalizar
      },

      "scenes": {
        "entrada": {
          "title": "Ponto de Ônibus",
          "panorama": "./imgs/ponto_onibus.jpeg",
          "hotSpots": [
            {
              "pitch": -30, "yaw": 0,
              "type": "scene",
              "text": "Próxima",
              "sceneId": "onibus-aguas-eventos",
              "scale": 5.0
            }
          ]
        },

        "onibus-aguas-eventos": {
          "title": "Edifício das Águas / Espaço de Eventos",
          "panorama": "./imgs/divisao_onibus-aguas-eventos.jpeg",
          "hotSpots": [
            {
              "pitch": -10, "yaw": -5,
              "type": "scene",
              "text": "Próxima",
              "sceneId": "onibus-eventos"
            },
            {
              "pitch": -10, "yaw": 85,
              "type": "scene",
              "text": "Precisa Mexer ainda",
              "sceneId": ""
            },
            {
              "pitch": -10, "yaw": 180,
              "type": "scene",
              "text": "Voltar para o ponto de ônibus",
              "sceneId": "entrada"
            }
          ]
        },

        "onibus-eventos": {
          "title": "Auditórios ou seguir",
          "panorama": "./imgs/onibus_eventos.jpeg",
          "yaw": 180,
          "hotSpots": [
            {
              "pitch": -5, "yaw": -7,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "onibus-aguas-eventos"
            },
            {
              "pitch": -5, "yaw": 80,
              "type": "scene",
              "text": "Eventos",
              "sceneId": "Porta-eventos"
            },
            {
              "pitch": -5, "yaw": 170,
              "type": "scene",
              "text": "Próximo",
              "sceneId": "corredor bloco 12"
            }
          ]
        },
        "Porta-eventos": {
          "title": "Auditórios",
          "panorama": "./imgs/Portaeventos.jpeg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": -7,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "entrada-eventos"
            },
            {
              "pitch": -5, "yaw": 160,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "onibus-eventos"
            }
          ]
        },
        "entrada-eventos": {
          "title": "Auditórios",
          "panorama": "./imgs/entrada_eventos.jpeg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": -15,
              "type": "scene",
              "text": "Seguir",
              "sceneId": "entrada-florestan"
            },
            {
              "pitch": -18, "yaw": 80,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "Porta-eventos"
            }
          ]
        },
        "entrada-florestan": {
          "title": "Auditórios",
          "panorama": "./imgs/entrada_florestan.jpeg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": 0,
              "type": "scene",
              "text": "Seguir",
              "sceneId": "divisao cesar lattes"
            },
            {
              "pitch": -18, "yaw": 180,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "entrada-eventos"
            },
            {
              "pitch": -18, "yaw": -90,
              "type": "scene",
              "text": "Florestan",
              "sceneId": "florestan"
            }

          ]
        },
        "divisao cesar lattes": {
          "title": "Auditórios",
          "yaw": 90,
          "panorama": "./imgs/corredor_cesar_lattes.jpeg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": 175,
              "type": "scene",
              "text": "Seguir",
              "sceneId": "cesar lattes"
            },
            {
              "pitch": -18, "yaw": -95,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "entrada-florestan"
            },

          ]
        },
        "florestan": {
          "title": "Auditórios",
          "panorama": "./imgs/florestan.jpeg",
          "yaw":180,
          "hotSpots": [
            {
              "pitch": -5, "yaw": 0,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "entrada-florestan"
            }
          ]
        },
        "cesar lattes": {
          "title": "Auditórios",
          "panorama": "./imgs/Cesar_lattes.jpeg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": 180,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "divisao cesar lattes"
            }
          ]
        },
        "corredor bloco 12": {
          "title": "Corredor bloco 12",
          "yaw": 180,
          "panorama": "./imgs/bloco 12 quiosque.jpeg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": -3,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "onibus-eventos"
            },
            {
              "pitch": -5, "yaw": 178,
              "type": "scene",
              "text": "Seguir",
              "sceneId": "quiosque"
            }
          ]
        },
        "quiosque": {
          "title": "quiosque",
          "yaw": 0,
          "panorama": "./imgs/centro quiosque.jpeg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": -3,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "onibus-eventos"
            }
          ]
        }

      }
    });

    // Salva a cena atual sempre que o usuário muda
    viewer.on('scenechange', function(sceneId) {
      localStorage.setItem('ultimaCena', sceneId);
    });

  </script>
</body>
</html>
