<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Mapa 360 Itaipu - Debug Hotspots</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
    }
    #panorama {
      width: 100%;
      height: 100vh;
    }

    .pannellum-hotspot .pnlm-hotspot-inner {
      width: 500px !important;       /* largura da 치rea clic치vel */
      height: 500px !important;      /* altura da 치rea clic치vel */
      min-width: 500px !important;
      min-height: 500px !important;
      border-radius: 50%;            /* mant칠m o c칤rculo */
      background-color: rgba(255, 0, 0, 0.6); /* opcional, s칩 para ver a 치rea */
      cursor: pointer;
    }
    /* Mini-mapa */
    #miniMapa {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 500px;
      height: 388px;
      border: 1px solid #ccc;
      overflow: hidden;
      background: url('./imgs/mapa-pti.png') no-repeat center/contain;
      z-index: 1000;
    }

    /* Marcador vermelho */
    #marker {
      position: absolute;
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background:red;
      pointer-events: none;
      z-index: 1001;
    }

    /* Pontos clic치veis (transparentes, s칩 para 치rea de clique) */
    .ponto {
      position: absolute;
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background: rgba(0, 0, 255, 0.88);
      cursor: pointer;
    }
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.css"/>
  <script src="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.js"></script>
</head>
<body>
  <div id="panorama"></div>

  <div id="miniMapa">
    <!-- Marcador vermelho -->
    <div id="marker"></div>

    <!-- Pontos clic치veis -->
    <div class="ponto" data-scene="entrada" style="left:264px; top:40px;"></div>
    <div class="ponto" data-scene="edificio das aguas" style="left:60px; top:80px;"></div>
    <div class="ponto" data-scene="entrada-eventos" style="left:315px; top:88px;"></div>
    <div class="ponto" data-scene="bloco 12" style="left:330px; top:180px;"></div>
    <div class="ponto" data-scene="quiosque" style="left:265px; top:225px;"></div>
    <div class="ponto" data-scene="porta lanchonete" style="left:120px; top:220px;"></div>
    <div class="ponto" data-scene="Labmaker" style="left:400px; top:85px;"></div>
    <div class="ponto" data-scene="biblioteca" style="left:120px; top:255px;"></div>
    <div class="ponto" data-scene="bloco6" style="left:200px; top:255px;"></div>
    <div class="ponto" data-scene="bloco5" style="left:210px; top:363px;"></div>

  </div>

  <script>
    // Recupera a 칰ltima cena visitada ou usa 'entrada' como padr칚o
    const ultimaCena = 'entrada';

    const viewer = pannellum.viewer('panorama', {
      "default": {
        "firstScene": ultimaCena,
        "sceneFadeDuration": 1000,
        "autoLoad": true,
        "hotSpotDebug": true,   // 游녣 muda para false quando finalizar
        "hfov": 100
      },

      "scenes": {
        "entrada": {
          "panorama": "./imgs/ponto_onibus_texto.png",
          "hotSpots": [
            {
              "pitch": -10, "yaw": 0,
              "type": "scene",
              "text": "Pr칩xima",
              "sceneId": "onibus-aguas-eventos",
              "scale": 5.0
            }
          ]
        },

        "onibus-aguas-eventos": {
          "panorama": "./imgs/onibusaguaeventos.jpg",
          "yaw":40,
          "hfov":200,
          "hotSpots": [
            {
              "pitch": -10, "yaw": -5,
              "type": "scene",
              "text": "Pr칩xima",
              "sceneId": "onibus-eventos",
              "scale": 5.0
            },
            {
              "pitch": -10, "yaw": 85,
              "type": "scene",
              "text": "Seguir",
              "scale": 5.0,
              "sceneId": "blocos 8 e 9"
            },
            {
              "pitch": -10, "yaw": 180,
              "type": "scene",
              "text": "Voltar para o ponto de 칪nibus",
              "scale": 5.0,
              "sceneId": "entrada"
            }
          ]
        },
        "blocos 8 e 9": {
          "panorama": "./imgs/blocos89.jpg",
          "yaw":0,
          "hotSpots": [
            {
              "pitch": -10, "yaw": 175,
              "type": "scene",
              "text": "Voltar",
              "targetYaw":-10,
              "scale": 5.0,
              "sceneId": "onibus-aguas-eventos"
            },
            {
              "pitch": -10, "yaw": -2,
              "type": "scene",
              "text": "Seguir",
              "targetYaw":0,
              "scale": 5.0,
              "sceneId": "blocos 3 e 4"
            }
          ]
        },
        "blocos 3 e 4": {
          "panorama": "./imgs/blocos34.jpg",
          "yaw":170,
          "hotSpots": [
            {
              "pitch": -10, "yaw": 175,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "blocos 8 e 9",
              "scale": 5.0,
              "targetYaw":180
            },
            {
              "pitch": -10, "yaw": -5,
              "type": "scene",
              "text": "Seguir",
              "scale": 5.0,
              "targetYaw":0,
              "sceneId": "edificio das aguas"
            }
          ]
        },
        "edificio das aguas": {
          "panorama": "./imgs/edificiodasaguas.jpg",
          "yaw":0,
          "hfov":200,
          "hotSpots": [
            {
              "pitch": -10, "yaw": 180,
              "type": "scene",
              "text": "Voltar",
              "targetYaw":180,
              "targetHfov": 100,
              "scale": 5.0,
              "sceneId": "blocos 3 e 4"
            }
          ]
        },
        

        "onibus-eventos": {
          "panorama": "./imgs/onibuseventos.jpg",
          "yaw": -50,
          "hfov": 200,
          "hotSpots": [
            {
              "pitch": -5, "yaw": -182,
              "type": "scene",
              "text": "Voltar",
              "targetYaw":170,
              "scale": 5.0,
              "sceneId": "onibus-aguas-eventos"
            },
            {
              "pitch": -5, "yaw": -92,
              "type": "scene",
              "text": "Eventos",
              "scale": 5.0,
              "sceneId": "entrada-eventos"
            },
            {
              "pitch": -5, "yaw": -3,
              "type": "scene",
              "text": "Pr칩ximo",
              "scale": 5.0,
              "sceneId": "onibus-bloco7 fundos"
            }
          ]
        },
        "onibus-bloco7 fundos": {
          "panorama": "./imgs/quiosquefundobloco7.jpg",
          "yaw": 40,
          "hfov":200,
          "hotSpots": [
            {
              "pitch": -5, "yaw": 0,
              "type": "scene",
              "text": "Seguir",
              "scale": 5.0,
              "sceneId": "corredor bloco 12 quiosque"
            },
            {
              "pitch": -5, "yaw": 90,
              "type": "scene",
              "text": "Fundo bloco 7",
              "scale": 5.0,
              "sceneId": "fora bloco 7"
            },
            {
              "pitch": -5, "yaw": 180,
              "type": "scene",
              "text": "Voltar",
              "targetYaw":220,
              "scale": 5.0,
              "sceneId": "onibus-eventos"
            }
          ]
        },
        
        "entrada-eventos": {
          "panorama": "./imgs/entradaeventos.jpg",
          "yaw":-65,
          "hfov":200,
          "hotSpots": [
            {
              "pitch": -5, "yaw": -20,
              "type": "scene",
              "text": "Seguir",
              "scale": 5.0,
              "sceneId": "entrada-florestan"
            },
            {
              "pitch": -5, "yaw": -80,
              "type": "scene",
              "text": "LabMaker",
              "scale": 5.0,
              "sceneId": "caminho_labmaker"
            },
            {
              "pitch": -18, "yaw": 80,
              "type": "scene",
              "text": "Voltar",
              "scale": 5.0,
              "sceneId": "onibus-eventos"
            }
          ]
        },
        "caminho_labmaker": {
          "panorama": "./imgs/caminho_labmaker.JPG",
          "yaw":-10,
          "hotSpots": [
            {
              "pitch": -5, "yaw": -20,
              "type": "scene",
              "text": "Labmaker",
              "scale": 5.0,
              "sceneId": "Labmaker"
            },
            {
              "pitch": -5, "yaw": -190,
              "type": "scene",
              "text": "Voltar",
              "scale": 5.0,
              "sceneId": "entrada-eventos"
            }
          ]
        },
        "Labmaker": {
          "panorama": "./imgs/labmaker.JPG",
          "yaw":-10,
          "hotSpots": [
            {
              "pitch": -18, "yaw": 80,
              "type": "scene",
              "text": "Voltar",
              "scale": 5.0,
              "sceneId": "entrada-eventos"
            }
          ]
        },
        "entrada-florestan": {
          "panorama": "./imgs/entrada_florestan.jpg",
          "yaw":-45,
          "hotSpots": [
            {
              "pitch": -5, "yaw": 0,
              "type": "scene",
              "text": "Seguir",
              "scale": 5.0,
              "sceneId": "divisao cesar lattes",
            },
            {
              "pitch": -18, "yaw": 180,
              "type": "scene",
              "text": "Voltar",
              "scale": 5.0,
              "sceneId": "entrada-eventos"
            },
            {
              "pitch": -18, "yaw": -90,
              "type": "scene",
              "text": "Florestan",
              "scale": 5.0,
              "sceneId": "florestan"
            }

          ]
        },
        "divisao cesar lattes": {
          "yaw": 130,
          "panorama": "./imgs/corredor_cesar_lattes.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": 170,
              "type": "scene",
              "text": "Entrar",
              "scale": 5.0,
              "sceneId": "cesar lattes"
            },
            {
              "pitch": -18, "yaw": -95,
              "type": "scene",
              "text": "Voltar",
              "targetYaw":180,
              "scale": 5.0,
              "sceneId": "entrada-florestan"
            },
            {
              "pitch": -20, "yaw": 85,
              "type": "scene",
              "text": "Bloco 12",
              "targetYaw":70,
              "scale": 5.0,
              "sceneId": "bloco 12 coffee break"
            }
          ]
        },
        "bloco 12 coffee break": {
          "yaw": 70,
          "panorama": "./imgs/bloco 12 coffee break.jpg",
          "hotSpots": [
            {
              "pitch": -10, "yaw": -95,
              "type": "scene",
              "text": "Voltar",
              "targetYaw":130,
              "scale": 5.0,
              "sceneId": "divisao cesar lattes"
            },
            {
              "pitch": -10, "yaw": 220,
              "type": "scene",
              "text": "Sair",
              "scale": 5.0,
              "sceneId": "onibus-eventos"
            },
            {
              "pitch": -10, "yaw": 70,
              "type": "scene",
              "text": "Bloco 12",
              "scale": 5.0,
              "sceneId": "#"
            }
          ]
        },
        "florestan": {
          "panorama": "./imgs/florestan.jpg",
          "yaw":230,
          "hfov":800,
          "hotSpots": [
            {
              "pitch": -5, "yaw": 0,
              "type": "scene",
              "text": "Voltar",
              "scale": 5.0,
              "sceneId": "entrada-florestan"
            }
          ]
        },
        "cesar lattes": {
          "panorama": "./imgs/Cesar_lattes.jpeg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": 180,
              "type": "scene",
              "text": "Voltar",
              "scale": 5.0,
              "sceneId": "divisao cesar lattes"
            }
          ]
        },
        "corredor bloco 12 quiosque": {
          "yaw": 135,
          "hfov":300,
          "panorama": "./imgs/bloco 12 quiosque.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": -3,
              "type": "scene",
              "text": "Voltar",
              "targetYaw":180,
              "scale": 5.0,
              "sceneId": "onibus-bloco7 fundos"
            },
            {
              "pitch": -5, "yaw": 178,
              "type": "scene",
              "text": "Seguir",
              "scale": 5.0,
              "sceneId": "quiosque"
            },
            {
              "pitch": -5, "yaw": 90,
              "type": "scene",
              "text": "Bloco 12",
              "scale": 5.0,
              "sceneId": "bloco 12"
            }
          ]
        },
        "quiosque": {
          "yaw": 0,
          "panorama": "./imgs/centroquiosque.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":-10,
              "type": "scene",
              "text": "Seguir",
              "scale": 5.0,
              "sceneId": "quiosque bloco 7"
            },
            {
              "pitch": -15, "yaw": 80,
              "type": "scene",
              "text": "Voltar",
              "scale": 5.0,
              "sceneId": "corredor bloco 12 quiosque",
              "targetYaw":0,
            },
            {
              "pitch": -10, "yaw": 270,
              "type": "scene",
              "text": "Seguir",
              "scale": 5.0,
              "sceneId": "bloco10bloco6",
            }
          ]
        },
        "bloco10bloco6": {
          "yaw": 225,
          "hfov":200,
          "panorama": "./imgs/bloco10bloco6.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":-92,
              "type": "scene",
              "text": "bloco 5",
              "scale": 5.0,
              "targetYaw":0,
              "sceneId": "bloco5fundos"
            },
            {
              "pitch": -5, "yaw":-185,
              "type": "scene",
              "text": "bloco 10",
              "scale": 5.0,
              "sceneId": "bloco10"
            },
            {
              "pitch": -5, "yaw":-265,
              "type": "scene",
              "text": "quiosque",
              "scale": 5.0,
              "sceneId": "quiosque"
            },
            {
              "pitch": -10, "yaw":-80,
              "type": "scene",
              "text": "bloco 6",
              "scale": 5.0,
              "sceneId": "bloco6"
            },
            
          ]
        },
        "bloco10": {
          "yaw": 0,
          "hfov":300,
          "panorama": "./imgs/bloco10.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":180,
              "type": "scene",
              "text": "Sair",
              "scale": 5.0,
              "sceneId": "bloco10bloco6"
            },
          ]
        },
        "bloco6": {
          "yaw": 0,
          "hfov":200,
          "panorama": "./imgs/bloco6.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":90,
              "type": "scene",
              "text": "Biblioteca",
              "targetYaw":180,
              "scale": 5.0,
              "sceneId": "caminhotorto"
            },
            {
              "pitch": -5, "yaw":-90,
              "type": "scene",
              "text": "bloco 10",
              "scale": 5.0,
              "sceneId": "bloco10bloco6"
            },
          ]
        },
        "caminhotorto": {
          "yaw": 0,
          "hfov":200,
          "panorama": "./imgs/bloco6caminhotorto.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":-90,
              "type": "scene",
              "text": "Descer",
              "scale": 5.0,
              "sceneId": "quiosquecaminhotorto"
            },
            {
              "pitch": -5, "yaw":0,
              "type": "scene",
              "text": "bloco 6",
              "scale": 5.0,
              "sceneId": "bloco6"
            },
            {
              "pitch": -5, "yaw":175,
              "type": "scene",
              "text": "Biblioteca",
              "scale": 5.0,
              "sceneId": "biblioteca"
            },
          ]
        },
        "bloco 12": {
          "yaw": -100,
          "hfov":200,
          "panorama": "./imgs/bloco1112.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": 190,
              "type": "scene",
              "text": "Sair",
              "scale": 5.0,
              "sceneId": "corredor bloco 12 quiosque"
            }
          ]
        },
        "quiosque bloco 7": {
          "yaw": -140,
          "hvof":200,
          "panorama": "./imgs/quiosquebloco 7.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": -3,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "quiosque",
              "scale": 5.0,
              "targetYaw":120,
            },
            {
              "pitch": -20, "yaw": -95,
              "type": "scene",
              "text": "Bloco 7",
              "scale": 5.0,
              "sceneId": "bloco 7"
            },
            {
              "pitch": -10, "yaw": -185,
              "type": "scene",
              "text": "Seguir",
              "scale": 5.0,
              "sceneId": "quiosquecaminhotorto"
            }
          ]
        },
        "quiosquecaminhotorto": {
          "yaw": -15,
          "hvof":600,
          "panorama": "./imgs/subidatorta.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw": 170,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "quiosque",
              "scale": 5.0,
              "targetYaw":120,
            },
            {
              "pitch": 0, "yaw":-50,
              "type": "scene",
              "text": "Bloco 6",
              "scale": 5.0,
              "sceneId": "caminhotorto"
            },
            {
              "pitch": -5, "yaw": 0,
              "type": "scene",
              "text": "Seguir",
              "scale": 5.0,
              "sceneId": "quiosque biblioteca lanchonete"
            }
          ]
        },
        "bloco 7": {
          "yaw": -170,
          "panorama": "./imgs/bloco 7 fundos.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":-10,
              "type": "scene",
              "text": "Voltar",
              "scale": 5.0,
              "sceneId": "quiosque bloco 7"
            },
            {
              "pitch": -5, "yaw": -178,
              "type": "scene",
              "text": "Pr칩ximo",
              "scale": 5.0,
              "sceneId": "bloco 7 2"
            }
          ]
        },
        "bloco 7 2": {
          "yaw": -170,
          "panorama": "./imgs/Bloco7.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":0,
              "type": "scene",
              "text": "Voltar",
              "sceneId": "bloco 7",
              "scale": 5.0,
              "targetYaw":0,
            },
            {
              "pitch": -5, "yaw": -178,
              "type": "scene",
              "text": "Sair",
              "scale": 5.0,
              "sceneId": "fora bloco 7"
            }
          ]
        },
        "fora bloco 7": {
          "yaw": 10,
          "panorama": "./imgs/fora bloco 7.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":10,
              "type": "scene",
              "text": "Entrar",
              "scale": 5.0,
              "sceneId": "bloco 7 2",
              "targetYaw": 0
            },
            {
              "pitch": -5, "yaw":-80,
              "type": "scene",
              "text": "Seguir",
              "scale": 5.0,
              "sceneId": "onibus-bloco7 fundos"
            }
          ]
        },
        "quiosque biblioteca lanchonete": {
          "yaw": -55,
          "hvof":100,
          "panorama": "./imgs/restaurante biblioteca.jpeg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":-10,
              "type": "scene",
              "text": "Lanchonete",
              "scale": 5.0,
              "sceneId": "porta lanchonete"
            },
            {
              "pitch": -5, "yaw":-100,
              "type": "scene",
              "text": "Biblioteca precisa mexer",
              "scale": 5.0,
              "sceneId": ""
            },
            {
              "pitch": -5, "yaw":-190,
              "type": "scene",
              "text": "voltar",
              "targetYaw": 180,
              "scale": 5.0,
              "sceneId": "quiosquecaminhotorto"
            }

          ]
        },
        "porta lanchonete": {
          "panorama": "./imgs/portalanchonete.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":175,
              "type": "scene",
              "text": "Voltar",
              "targetYaw":180,
              "scale": 5.0,
              "sceneId": "quiosque biblioteca lanchonete"
            },
            {
              "pitch": -5, "yaw":-75,
              "type": "scene",
              "text": "Biblioteca",
              "targetYaw":0,
              "scale": 5.0,
              "sceneId": "biblioteca"
            }
          ]
        },
        "biblioteca": {
          "panorama": "./imgs/biblioteca.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":200,
              "type": "scene",
              "text": "Lanchonete",
              "targetYaw":0,
              "scale": 5.0,
              "sceneId": "porta lanchonete"
            }
          ]
        },
        "bloco5": {
          "hfov":200,
          "panorama": "./imgs/bloco5.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":90,
              "type": "scene",
              "text": "Corredor",
              "scale": 5.0,
              "sceneId": "bloco5fundos"
            }
          ]
        },
        "bloco5fundos": {
          "yaw":50,
          "hfov":200,
          "panorama": "./imgs/bloco5fundos.jpg",
          "hotSpots": [
            {
              "pitch": -5, "yaw":65,
              "type": "scene",
              "text": "Seguir",
              "targetYaw":90,
              "scale": 5.0,
              "sceneId": "bloco10bloco6"
            },
            {
              "pitch": -5, "yaw":-20,
              "type": "scene",
              "text": "BLoco 5",
              "scale": 5.0,
              "sceneId": "bloco5"
            }
          ]
        }



      }
    });

    // Salva a cena atual sempre que o usu치rio muda
    viewer.on('scenechange', function(sceneId) {
      localStorage.setItem('ultimaCena', sceneId);
      updateMarker(sceneId);
    });

    // Coordenadas dos pontos no mini-mapa
    const pontos = {
  "entrada": { x: 270, y: 47 },
  "onibus-aguas-eventos": { x: 275, y: 85 },
  "blocos 8 e 9": { x: 230, y: 85 },
  "blocos 3 e 4": { x: 125, y: 85 },
  "onibus-eventos": {x:277, y:100},
  "onibus-bloco7 fundos":{x:280, y:150},
  "corredor bloco 12 quiosque":{x:280 ,y:180},
  "quiosque bloco 7":{x:230, y:225},
  "bloco 7": {x:230, y:200},
  "bloco 7 2": {x:230, y:170},
  "fora bloco 7":{x:230,y:155},
  "edificio das aguas": { x: 67, y: 85 },
  "entrada-eventos": { x: 322, y: 95 },
  "bloco 12": { x: 337, y: 185 },
  "quiosque": { x: 270, y: 230 },
  "quiosque biblioteca lanchonete":{x:153, y:225},
  "porta lanchonete": { x: 126, y: 225 },
  "caminho_labmaker": { x: 370, y: 95 },
  "Labmaker": { x: 407, y: 92 },
  "entrada-florestan": {x: 335, y: 120},
  "divisao cesar lattes": {x: 335, y: 110},
  "bloco 12 coffee break": {x: 335, y: 123},
  "caminhotorto": {x: 180, y: 260},
  "biblioteca": {x: 130, y: 260},
  "bloco6": {x: 210, y: 260},
  "bloco10bloco6": {x: 275, y: 250},
  "bloco10": {x: 340, y: 250},
  "bloco5fundos": {x: 275, y: 370},
  "bloco5": {x: 216, y: 368},
  
};

    // Atualiza o marcador vermelho
  function updateMarker(sceneId){
  const pos = pontos[sceneId];
  if(pos){
    const marker = document.getElementById("marker");
    const miniMapa = document.getElementById("miniMapa");
    const scaleX = miniMapa.offsetWidth / 500; // 500 = largura do seu mini-mapa
    const scaleY = miniMapa.offsetHeight / 388; // 380 = altura do mini-mapa

    marker.style.left = pos.x * scaleX - marker.offsetWidth/2 + "px"; 
    marker.style.top = pos.y * scaleY - marker.offsetHeight/2 + "px";
  }
}

    updateMarker(ultimaCena);

    // Clicar nos pontos para navegar
    document.querySelectorAll(".ponto").forEach(el => {
      el.addEventListener("click", () => {
        const scene = el.dataset.scene;
        viewer.loadScene(scene);
        updateMarker(scene);
      });
    });

  </script>
</body>
</html>
